
FROM node:16-alpine

WORKDIR /app

RUN npm add --global pnpm

COPY ./package.json  ./
COPY ./pnpm-lock.yaml  ./
RUN pnpm install

COPY ./  ./


ENV VITE_SITE_DESC="Francesco Calo's blog, a fullstack web developer journey, from devops, automation to functional programming, linux, typescript, nodejs, k8s, bash."
ENV VITE_PAGE_SIZE=5
ENV VITE_SITE='https://fcalo.com'
RUN pnpm build

ENTRYPOINT cp -r ./dist/* ./public-def
